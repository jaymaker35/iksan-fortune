<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¤ëŠ˜ì˜ ìš´ì„¸ & ìµì‚° ë§›ì§‘ Pro</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts (Noto Sans KR) -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Visitor Counter Script (Busuanzi) -->
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #312e81 100%);
            min-height: 100vh;
            color: white;
            -webkit-overflow-scrolling: touch; 
        }
        .glass-panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
            opacity: 0;
            transform: translateY(20px);
        }
        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .loader {
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top: 3px solid #fff;
            width: 24px;
            height: 24px;
            -webkit-animation: spin 1s linear infinite;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .hover-lift {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .hover-lift:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        /* Custom Checkbox */
        .custom-checkbox:checked {
            background-color: #4f46e5;
            border-color: #4f46e5;
        }
        /* Star Rating Animation */
        .star-filled { color: #fbbf24; }
        .star-empty { color: #4b5563; }
        
        /* Visitor Counter Animation */
        #busuanzi_container_site_pv {
            animation: fadeIn 1s ease-in-out;
        }
    </style>
</head>
<body class="flex items-center justify-center p-4 min-h-screen">

    <div class="max-w-md w-full glass-panel rounded-2xl shadow-2xl overflow-hidden relative my-8">
        <!-- Decorative Elements -->
        <div class="absolute top-0 left-0 w-32 h-32 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"></div>
        <div class="absolute top-0 right-0 w-32 h-32 bg-indigo-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"></div>

        <div class="relative z-10 p-6 sm:p-8">
            <!-- Header -->
            <div class="text-center mb-8">
                <div class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-indigo-500/30 mb-4">
                    <i data-lucide="sparkles" class="w-6 h-6 text-yellow-300"></i>
                </div>
                <h1 class="text-2xl font-bold mb-2">ì˜¤ëŠ˜ì˜ ìš´ì„¸ & ìµì‚° ë§›ì§‘</h1>
                <p class="text-gray-300 text-sm">ë‹¹ì‹ ì˜ í•˜ë£¨ë¥¼ ìœ„í•œ ë§ì¶¤í˜• ê°€ì´ë“œ</p>
            </div>

            <!-- Input Form -->
            <div id="input-section" class="space-y-5 transition-all duration-300">
                <div class="space-y-4">
                    <!-- Name Input -->
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-1">ì´ë¦„ (ì„ íƒ)</label>
                        <input type="text" id="username" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white placeholder-gray-500">
                    </div>

                    <!-- Birthdate Input -->
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-1">ìƒë…„ì›”ì¼</label>
                        <input type="date" id="birthdate" class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white placeholder-gray-400 appearance-none" required>
                    </div>

                    <!-- Remember Me Checkbox -->
                    <div class="flex items-center gap-2">
                        <input type="checkbox" id="remember-me" class="w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 custom-checkbox">
                        <label for="remember-me" class="text-sm text-gray-400 select-none cursor-pointer">ë‚´ ì •ë³´ ê¸°ì–µí•˜ê¸°</label>
                    </div>
                </div>
                
                <button onclick="calculateFortune()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-xl transition duration-300 flex items-center justify-center gap-2 group shadow-lg shadow-indigo-500/30 hover-lift mt-2">
                    <span id="btn-text">ìš´ì„¸ ë³´ê¸°</span>
                    <div id="btn-loader" class="loader hidden"></div>
                    <i data-lucide="arrow-right" class="w-4 h-4 group-hover:translate-x-1 transition-transform" id="btn-icon"></i>
                </button>
            </div>

            <!-- Result Section (Hidden initially) -->
            <div id="result-section" class="hidden space-y-8 pt-2">
                
                <!-- 1. Horoscope Result -->
                <div class="fade-in" style="animation-delay: 0.1s;">
                    <div class="flex items-center gap-3 mb-3">
                        <span id="zodiac-icon" class="text-3xl"></span>
                        <div class="flex flex-col">
                            <span id="user-greeting" class="text-sm text-indigo-300 font-medium"></span>
                            <h2 id="zodiac-name" class="text-xl font-bold text-white"></h2>
                        </div>
                    </div>

                    <!-- Detailed Scores -->
                    <div class="grid grid-cols-3 gap-2 mb-4">
                        <div class="bg-white/5 rounded-lg p-2 text-center border border-white/10">
                            <span class="text-xs text-gray-400 block mb-1">ì• ì •ìš´</span>
                            <div id="score-love" class="text-xs tracking-tighter"></div>
                        </div>
                        <div class="bg-white/5 rounded-lg p-2 text-center border border-white/10">
                            <span class="text-xs text-gray-400 block mb-1">ì¬ë¬¼ìš´</span>
                            <div id="score-money" class="text-xs tracking-tighter"></div>
                        </div>
                        <div class="bg-white/5 rounded-lg p-2 text-center border border-white/10">
                            <span class="text-xs text-gray-400 block mb-1">ê±´ê°•ìš´</span>
                            <div id="score-health" class="text-xs tracking-tighter"></div>
                        </div>
                    </div>

                    <div class="bg-white/5 rounded-xl p-4 border border-white/10 shadow-inner">
                        <p id="fortune-text" class="text-gray-100 leading-relaxed text-sm sm:text-base font-medium"></p>
                    </div>
                    
                    <div class="flex gap-2 mt-3 justify-end">
                        <span id="lucky-color" class="text-xs px-3 py-1 rounded-full bg-white/10 text-indigo-200 border border-white/10"></span>
                        <span id="lucky-number" class="text-xs px-3 py-1 rounded-full bg-white/10 text-indigo-200 border border-white/10"></span>
                    </div>
                </div>

                <!-- 2. Iksan Food Recommendation -->
                <div class="fade-in bg-orange-500/10 rounded-xl p-5 border border-orange-500/20 relative group" style="animation-delay: 0.2s;">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center gap-2">
                            <div class="p-2 bg-orange-500/20 rounded-lg">
                                <i data-lucide="utensils" class="w-5 h-5 text-orange-300"></i>
                            </div>
                            <h3 class="font-bold text-white">ì˜¤ëŠ˜ì˜ ìµì‚° ì¶”ì²œ ë©”ë‰´</h3>
                        </div>
                        <!-- Reroll Button -->
                        <button onclick="rerollFood()" class="text-xs flex items-center gap-1 bg-orange-500/20 hover:bg-orange-500/30 text-orange-200 px-2 py-1 rounded-md transition-colors" title="ë‹¤ë¥¸ ë©”ë‰´ ì¶”ì²œ">
                            <i data-lucide="refresh-ccw" class="w-3 h-3"></i>
                            ë‹¤ì‹œ ë½‘ê¸°
                        </button>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <h4 id="food-name" class="text-lg font-bold text-orange-200"></h4>
                            <p id="food-desc" class="text-sm text-gray-300 leading-relaxed mt-1"></p>
                        </div>
                        <a id="food-map-link" href="#" target="_blank" class="flex items-center justify-center gap-2 w-full py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors font-medium hover-lift text-sm shadow-md">
                            <i data-lucide="map-pin" class="w-4 h-4"></i>
                            <span>ì§€ë„ë¡œ ì‹ë‹¹ ì°¾ê¸°</span>
                        </a>
                    </div>
                </div>

                <!-- 3. Music Recommendation -->
                <div class="fade-in" style="animation-delay: 0.3s;">
                    <div class="flex items-center gap-2 mb-3">
                        <i data-lucide="headphones" class="w-5 h-5 text-pink-400"></i>
                        <h3 class="font-bold text-white">ê¸°ë¶„ ì „í™˜ BGM</h3>
                    </div>
                    
                    <div class="bg-white/5 rounded-xl p-4 border border-white/10">
                        <p id="music-title" class="text-sm font-semibold text-white mb-1"></p>
                        <p id="music-desc" class="text-xs text-gray-400 mb-4"></p>
                        
                        <a id="youtube-link" href="#" target="_blank" class="flex items-center justify-center gap-2 w-full py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors font-medium hover-lift shadow-md">
                            <i data-lucide="youtube" class="w-5 h-5"></i>
                            <span>ìœ íŠœë¸Œì—ì„œ ë“£ê¸°</span>
                        </a>
                    </div>
                </div>

                <!-- Copy Result Button -->
                <div class="fade-in" style="animation-delay: 0.4s;">
                    <button onclick="copyResult()" id="copy-btn" class="w-full py-3 bg-indigo-600/50 hover:bg-indigo-600/80 border border-indigo-500/50 text-indigo-100 rounded-xl transition-colors font-medium flex items-center justify-center gap-2 mb-4">
                        <i data-lucide="share-2" class="w-4 h-4"></i>
                        <span>ê²°ê³¼ í…ìŠ¤íŠ¸ ë³µì‚¬í•˜ê¸°</span>
                    </button>
                </div>

                <!-- Reset Button -->
                <div class="fade-in pt-4 text-center border-t border-white/10" style="animation-delay: 0.5s;">
                    <button onclick="resetApp()" class="text-sm text-gray-400 hover:text-white flex items-center justify-center gap-1 mx-auto transition-colors">
                        <i data-lucide="refresh-cw" class="w-3 h-3"></i>
                        ë‹¤ë¥¸ ìƒë…„ì›”ì¼ë¡œ ë‹¤ì‹œ ë³´ê¸°
                    </button>
                </div>
            </div>

            <!-- Footer & Visitor Counter (New) -->
            <div class="mt-8 pt-4 border-t border-white/10 flex justify-between items-end text-xs text-gray-400">
                <div>
                    <p class="mb-1">Â© 2025 Iksan Fortune</p>
                    <p>Designed for you</p>
                </div>
                
                <!-- Busuanzi Counter Container -->
                <div class="flex items-center gap-1 bg-white/5 px-2 py-1 rounded-lg border border-white/5">
                    <span id="busuanzi_container_site_pv" style="display:none;">
                        <i data-lucide="users" class="w-3 h-3 inline text-indigo-300"></i>
                        <span class="ml-1">ë°©ë¬¸ììˆ˜: </span>
                        <span id="busuanzi_value_site_pv" class="font-bold text-indigo-200">Loading...</span>
                    </span>
                </div>
            </div>

        </div>
    </div>

    <!-- Hidden textarea for copying -->
    <textarea id="hidden-copy-area" class="fixed top-0 left-0 w-1 h-1 opacity-0 pointer-events-none"></textarea>

    <script>
        // Icons initialization
        lucide.createIcons();

        // 1. Load saved data on startup
        window.addEventListener('load', () => {
            const savedName = localStorage.getItem('fortune_name');
            const savedDate = localStorage.getItem('fortune_date');
            if (savedName) document.getElementById('username').value = savedName;
            if (savedDate) {
                document.getElementById('birthdate').value = savedDate;
                document.getElementById('remember-me').checked = true;
            }
        });

        const zodiacSigns = [
            { name: "ë¬¼ë³‘ìë¦¬", start: "01-20", end: "02-18", icon: "â™’" },
            { name: "ë¬¼ê³ ê¸°ìë¦¬", start: "02-19", end: "03-20", icon: "â™“" },
            { name: "ì–‘ìë¦¬", start: "03-21", end: "04-19", icon: "â™ˆ" },
            { name: "í™©ì†Œìë¦¬", start: "04-20", end: "05-20", icon: "â™‰" },
            { name: "ìŒë‘¥ì´ìë¦¬", start: "05-21", end: "06-21", icon: "â™Š" },
            { name: "ê²Œìë¦¬", start: "06-22", end: "07-22", icon: "â™‹" },
            { name: "ì‚¬ììë¦¬", start: "07-23", end: "08-22", icon: "â™Œ" },
            { name: "ì²˜ë…€ìë¦¬", start: "08-23", end: "09-22", icon: "â™" },
            { name: "ì²œì¹­ìë¦¬", start: "09-23", end: "10-22", icon: "â™" },
            { name: "ì „ê°ˆìë¦¬", start: "10-23", end: "11-22", icon: "â™" },
            { name: "ì‚¬ìˆ˜ìë¦¬", start: "11-23", end: "12-24", icon: "â™" },
            { name: "ì—¼ì†Œìë¦¬", start: "12-25", end: "01-19", icon: "â™‘" }
        ];

        const fortunes = [
            { text: "ì˜¤ëŠ˜ì€ ë‹¹ì‹ ì˜ ì§ê´€ë ¥ì´ ë¹›ì„ ë°œí•˜ëŠ” ë‚ ì…ë‹ˆë‹¤. ë§ì„¤ì´ë˜ ì¼ì´ ìˆë‹¤ë©´ ê³¼ê°í•˜ê²Œ ë„ì „í•´ë³´ì„¸ìš”. ì˜ˆìƒì¹˜ ëª»í•œ í–‰ìš´ì´ ë”°ë¥¼ ê²ƒì…ë‹ˆë‹¤.", mood: "active" },
            { text: "ì ì‹œ ì‰¬ì–´ê°€ëŠ” ì—¬ìœ ê°€ í•„ìš”í•œ í•˜ë£¨ì…ë‹ˆë‹¤. ë¬´ë¦¬í•˜ê²Œ ì¼ì„ ì§„í–‰í•˜ê¸°ë³´ë‹¤ëŠ” í˜„ì¬ ìƒíƒœë¥¼ ì ê²€í•˜ê³  ë‚´ì‹¤ì„ ë‹¤ì§€ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.", mood: "calm" },
            { text: "ëŒ€ì¸ê´€ê³„ì—ì„œ ê¸°ë¶„ ì¢‹ì€ ì†Œì‹ì´ ë“¤ë ¤ì˜¬ ê²ƒ ê°™ì•„ìš”. ì˜¤ëœ ì¹œêµ¬ì—ê²Œ ì—°ë½í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ë§Œë‚¨ì„ ê°€ì ¸ë³´ê¸°ì— ì•„ì£¼ ì¢‹ì€ ë‚ ì…ë‹ˆë‹¤.", mood: "happy" },
            { text: "ì‘ì€ ì‹¤ìˆ˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë‹ˆ ê¼¼ê¼¼í•¨ì´ í•„ìš”í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ë„ˆë¬´ ê±±ì •í•˜ì§€ ë§ˆì„¸ìš”, ì „í™”ìœ„ë³µì˜ ê¸°íšŒê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.", mood: "focus" },
            { text: "ì°½ì˜ì ì¸ ì•„ì´ë””ì–´ê°€ ìƒ˜ì†ŸëŠ” ë‚ ì…ë‹ˆë‹¤. ë©”ëª¨í•˜ëŠ” ìŠµê´€ì„ ë“¤ì´ì„¸ìš”. ì˜¤ëŠ˜ì˜ ìƒê°ì´ ë¯¸ë˜ì˜ í° ìì‚°ì´ ë  ê²ƒì…ë‹ˆë‹¤.", mood: "dreamy" },
            { text: "ì‚¬ë‘ì˜ ê¸°ìš´ì´ ê°€ë“í•œ í•˜ë£¨ì…ë‹ˆë‹¤. ì—°ì¸ì´ ìˆë‹¤ë©´ ë”ìš± ê¹Šì–´ì§ˆ ê²ƒì´ê³ , ì†”ë¡œë¼ë©´ ìƒˆë¡œìš´ ì¸ì—°ì„ ê¸°ëŒ€í•´ë„ ì¢‹ìŠµë‹ˆë‹¤.", mood: "romantic" },
            { text: "ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ì¡°ê¸ˆ ìŒ“ì¼ ìˆ˜ ìˆëŠ” ë‚ ì…ë‹ˆë‹¤. ì˜¤ëŠ˜ì€ ë‚¨ë“¤ë³´ë‹¤ ë‚˜ ìì‹ ì„ ì±™ê¸°ëŠ” í•˜ë£¨ë¥¼ ë³´ë‚´ì„¸ìš”. ë§›ìˆëŠ” ìŒì‹ìœ¼ë¡œ íë§ì´ í•„ìš”í•©ë‹ˆë‹¤.", mood: "healing" }
        ];

        const musicRecommendations = {
            "active": { url: "https://www.youtube.com/watch?v=gBank9pDQHM", title: "ì—ë„ˆì§€ ë„˜ì¹˜ëŠ” í•˜ë£¨ë¥¼ ìœ„í•œ íŒ", desc: "í™œê¸°ì°¬ í•˜ë£¨ë¥¼ ìœ„í•œ Upbeat Pop Playlist" },
            "calm": { url: "https://www.youtube.com/watch?v=jfKfPfyJRdk", title: "ë§ˆìŒì´ í¸ì•ˆí•´ì§€ëŠ” Lo-fi", desc: "ì°¨ë¶„í•œ íœ´ì‹ì„ ìœ„í•œ Lo-fi beats" },
            "happy": { url: "https://www.youtube.com/watch?v=5qap5aO4i9A", title: "ê¸°ë¶„ ì¢‹ì€ ì–´ì¿ ìŠ¤í‹± ë…¸ë˜", desc: "í–‰ë³µí•œ ê¸°ë¶„ì„ ë”í•´ì¤„ Acoustic Songs" },
            "focus": { url: "https://www.youtube.com/watch?v=WPni755-Krg", title: "ì§‘ì¤‘ë ¥ì„ ë†’ì—¬ì£¼ëŠ” í”¼ì•„ë…¸", desc: "ì°¨ë¶„í•˜ê²Œ ì§‘ì¤‘í•  ìˆ˜ ìˆëŠ” Piano Ambient" },
            "dreamy": { url: "https://www.youtube.com/watch?v=tNkZsRW7h2c", title: "ìƒìƒë ¥ì„ ìê·¹í•˜ëŠ” ìš°ì£¼ì  ì‚¬ìš´ë“œ", desc: "ì˜ê°ì„ ì£¼ëŠ” Space Ambient Music" },
            "romantic": { url: "https://www.youtube.com/watch?v=rJ_qC0T5tMI", title: "ë‹¬ë‹¬í•œ ì‚¬ë‘ ë…¸ë˜ ëª¨ìŒ", desc: "ì„¤ë ˜ ê°€ë“í•œ K-Pop Ballad & R&B" },
            "healing": { url: "https://www.youtube.com/watch?v=lTRiuFIWV54", title: "ì§€ì¹œ ë§ˆìŒì„ ìœ„ë¡œí•˜ëŠ” ì—°ì£¼ê³¡", desc: "í¸ì•ˆí•œ íë§ í”¼ì•„ë…¸ ì—°ì£¼ê³¡" }
        };

        const foodRecommendations = {
            "active": [
                { name: "í™©ë“± ìœ¡íšŒë¹„ë¹”ë°¥", searchQuery: "ìµì‚° í™©ë“± ìœ¡íšŒë¹„ë¹”ë°¥ ë§›ì§‘", desc: "í™œë ¥ì´ ë„˜ì¹˜ëŠ” ì˜¤ëŠ˜! ë“ ë“ í•œ ìœ¡íšŒë¹„ë¹”ë°¥ìœ¼ë¡œ ì—ë„ˆì§€ ì¶©ì „." },
                { name: "ì†œë¦¬ì¹˜í‚¨ (ê°€ë§ˆì†¥í†µë‹­)", searchQuery: "ìµì‚° ì†œë¦¬ì¹˜í‚¨", desc: "ìµì‚°ì˜ ìì¡´ì‹¬! ë°”ì‚­í•˜ê³  ê³ ì†Œí•œ ì¹´ë ˆí–¥ í†µë‹­." },
                { name: "ìµì‚°ì—­ ì• ì«„ë©´", searchQuery: "ìµì‚°ì—­ ì«„ë©´ ë§›ì§‘", desc: "ìƒˆì½¤ë‹¬ì½¤ ë§¤ì½¤í•œ ì«„ë©´ìœ¼ë¡œ ì…ë§›ì„ í™• ë‹ìš°ì„¸ìš”!" }
            ],
            "calm": [
                { name: "ì„œë™ë§ˆ(ë§ˆ) ìš”ë¦¬", searchQuery: "ìµì‚° ì„œë™ë§ˆ ë§›ì§‘", desc: "ì†ì´ í¸ì•ˆí•œ ì„œë™ë§ˆ ìš”ë¦¬ë¡œ ê±´ê°•í•œ í•œ ë¼." },
                { name: "ë¯¸ë¥µì‚¬ì§€ ìˆœë‘ë¶€", searchQuery: "ìµì‚° ë¯¸ë¥µì‚¬ì§€ ìˆœë‘ë¶€", desc: "ìê·¹ì ì´ì§€ ì•Šê³  ê³ ì†Œí•œ ìˆœë‘ë¶€ì˜ ê¹Šì€ ë§›." },
                { name: "ì „í†µ ì°»ì§‘ ìŒí™”íƒ•", searchQuery: "ìµì‚° ì „í†µ ì°»ì§‘", desc: "ë”°ëœ»í•œ ìŒí™”íƒ• í•œ ì”ê³¼ í•¨ê»˜í•˜ëŠ” ì—¬ìœ ." }
            ],
            "happy": [
                { name: "ìµì‚° ì‹œì¥ ê¹¨í†µë‹­", searchQuery: "ìµì‚° ê¹¨í†µë‹­", desc: "ê¸°ë¶„ ì¢‹ì€ ë‚ ì—” ì—­ì‹œ ì‹œì¥ í†µë‹­! ì¹œêµ¬ë“¤ê³¼ ë‚˜ëˆ  ë¨¹ê¸° ë”± ì¢‹ì•„ìš”." },
                { name: "ëª¨í˜„ë™ ì‚¼ê²¹ì‚´", searchQuery: "ìµì‚° ëª¨í˜„ë™ ì‚¼ê²¹ì‚´", desc: "ì¦ê±°ìš´ ë‚ ì—” ì§€ê¸€ì§€ê¸€ ì‚¼ê²¹ì‚´ íŒŒí‹°ê°€ ìµœê³ ì£ ." },
                { name: "ì˜ë“±ë™ ë–¡ë³¶ì´", searchQuery: "ìµì‚° ì˜ë“±ë™ ë–¡ë³¶ì´ ë§›ì§‘", desc: "ë§¤ì½¤ë‹¬ì½¤ ë–¡ë³¶ì´ë¡œ í–‰ë³µ ì§€ìˆ˜ ì—…!" }
            ],
            "focus": [
                { name: "ì‹œì›í•œ ëŒ€êµ¬íƒ•", searchQuery: "ìµì‚° ëŒ€êµ¬íƒ• ë§›ì§‘", desc: "ë¨¸ë¦¬ê°€ ë§‘ì•„ì§€ëŠ” ì‹œì›í•œ êµ­ë¬¼ ìš”ë¦¬." },
                { name: "ì „ì£¼ì‹ ì½©ë‚˜ë¬¼êµ­ë°¥", searchQuery: "ìµì‚° ì½©ë‚˜ë¬¼êµ­ë°¥", desc: "ë”°ëœ»í•˜ê³  ë“ ë“ í•˜ê²Œ ì†ì„ ì±„ì›Œ ì§‘ì¤‘ë ¥ í–¥ìƒ." },
                { name: "ê°ˆë¹„íƒ•", searchQuery: "ìµì‚° ê°ˆë¹„íƒ• ë§›ì§‘", desc: "ì§„í•œ êµ­ë¬¼ì˜ ê°ˆë¹„íƒ•ìœ¼ë¡œ ë“ ë“ í•˜ê²Œ ëª¸ë³´ì‹ ." }
            ],
            "dreamy": [
                { name: "ìµì‚° ê³ êµ¬ë§ˆë¹µ", searchQuery: "ìµì‚° ê³ êµ¬ë§ˆë¹µ", desc: "ë‹¬ì½¤í•˜ê³  ë¶€ë“œëŸ¬ìš´ ê³ êµ¬ë§ˆë¹µ, ì°½ì˜ë ¥ ìê·¹ ê°„ì‹." },
                { name: "ëŒ€í•™ë¡œ ì™€í”Œ", searchQuery: "ìµì‚° ì›ê´‘ëŒ€ ì™€í”Œ", desc: "ë‹¬ë‹¬í•œ ì™€í”Œ í•œ ì…ìœ¼ë¡œ ê¸°ë¶„ ì „í™˜." },
                { name: "ë¶„ìœ„ê¸° ì¢‹ì€ ë² ì´ì»¤ë¦¬ ì¹´í˜", searchQuery: "ìµì‚° ë² ì´ì»¤ë¦¬ ì¹´í˜", desc: "í–¥ê¸‹í•œ ë¹µ ëƒ„ìƒˆì™€ í•¨ê»˜ ì•„ì´ë””ì–´ êµ¬ìƒí•˜ê¸°." }
            ],
            "romantic": [
                { name: "ì˜ë“±ë™ íŒŒìŠ¤íƒ€", searchQuery: "ìµì‚° ì˜ë“±ë™ íŒŒìŠ¤íƒ€", desc: "ë¡œë§¨í‹±í•œ ë¶„ìœ„ê¸°ì—ì„œ ì¦ê¸°ëŠ” íŒŒìŠ¤íƒ€ í•œ ì ‘ì‹œ." },
                { name: "ìŠ¤í…Œì´í¬ í•˜ìš°ìŠ¤", searchQuery: "ìµì‚° ìŠ¤í…Œì´í¬ ë§›ì§‘", desc: "íŠ¹ë³„í•œ ë‚ , ì¹¼ì§ˆ í•œë²ˆ ì–´ë•Œìš”?" },
                { name: "ë¶„ìœ„ê¸° ì¢‹ì€ ì™€ì¸ë°”", searchQuery: "ìµì‚° ì™€ì¸ë°”", desc: "ì€ì€í•œ ì¡°ëª… ì•„ë˜ ì™€ì¸ í•œ ì”ì˜ ì—¬ìœ ." }
            ],
            "healing": [
                { name: "ë§¤ì½¤í•œ ë‚™ì§€ë³¶ìŒ", searchQuery: "ìµì‚° ë‚™ì§€ë³¶ìŒ", desc: "ìŠ¤íŠ¸ë ˆìŠ¤ íƒ€íŒŒ! ë•€ í˜ë¦¬ë©° ë¨¹ëŠ” ë§¤ìš´ë§›." },
                { name: "ì–¼í°í•œ ë¬¼ì§œì¥", searchQuery: "ìµì‚° ë¬¼ì§œì¥ ë§›ì§‘", desc: "ìµì‚°ì˜ ëª…ë¬¼, ì–¼í°í•˜ê³  ê±¸ì­‰í•œ ë¬¼ì§œì¥ì˜ ë§¤ë ¥." },
                { name: "ë§¤ìš´ ì§¬ë½•", searchQuery: "ìµì‚° ì§¬ë½• ë§›ì§‘", desc: "ì†ì´ ë»¥ ëš«ë¦¬ëŠ” ë§¤ìš´ êµ­ë¬¼ í•œ ì‚¬ë°œ." }
            ]
        };

        const colors = ["ê³¨ë“œ", "ì‹¤ë²„", "ë”¥ë¸”ë£¨", "ë¡œì¦ˆí•‘í¬", "ì—ë©”ë„ë“œ", "í™”ì´íŠ¸", "ë°”ì´ì˜¬ë ›"];

        let currentMood = "";
        let currentFoodIndex = 0;

        function getZodiac(date) {
            const month = date.getMonth() + 1;
            const day = date.getDate();
            const dateStr = `${month.toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
            if (month === 1 && day <= 19) return zodiacSigns.find(z => z.name === "ì—¼ì†Œìë¦¬");
            for (let z of zodiacSigns) {
                if (dateStr >= z.start && dateStr <= z.end) return z;
            }
            return zodiacSigns.find(z => z.name === "ì—¼ì†Œìë¦¬");
        }

        function seededRandom(seed) {
            let x = Math.sin(seed++) * 10000;
            return x - Math.floor(x);
        }

        function generateStars(score) {
            let stars = "";
            for (let i = 0; i < 5; i++) {
                if (i < score) stars += `<span class="star-filled">â˜…</span>`;
                else stars += `<span class="star-empty">â˜†</span>`;
            }
            return stars;
        }

        function calculateFortune() {
            const birthInput = document.getElementById('birthdate').value;
            const nameInput = document.getElementById('username').value.trim();
            const rememberMe = document.getElementById('remember-me').checked;

            if (!birthInput) {
                alert("ìƒë…„ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                return;
            }

            if (rememberMe) {
                localStorage.setItem('fortune_date', birthInput);
                localStorage.setItem('fortune_name', nameInput);
            } else {
                localStorage.removeItem('fortune_date');
                localStorage.removeItem('fortune_name');
            }

            const btnText = document.getElementById('btn-text');
            const btnLoader = document.getElementById('btn-loader');
            const btnIcon = document.getElementById('btn-icon');
            btnText.classList.add('hidden');
            btnIcon.classList.add('hidden');
            btnLoader.classList.remove('hidden');

            setTimeout(() => {
                const birthDate = new Date(birthInput);
                const today = new Date();
                const zodiac = getZodiac(birthDate);

                const seedString = birthInput + today.toISOString().split('T')[0];
                let seed = 0;
                for (let i = 0; i < seedString.length; i++) seed += seedString.charCodeAt(i);

                const rand1 = seededRandom(seed);
                const rand2 = seededRandom(seed + 1);
                
                const fortuneIndex = Math.floor(rand1 * fortunes.length);
                const selectedFortune = fortunes[fortuneIndex];
                currentMood = selectedFortune.mood;

                const loveScore = Math.floor(seededRandom(seed + 2) * 5) + 1;
                const moneyScore = Math.floor(seededRandom(seed + 3) * 5) + 1;
                const healthScore = Math.floor(seededRandom(seed + 4) * 5) + 1;

                const luckyColor = colors[Math.floor(rand2 * colors.length)];
                const luckyNumber = Math.floor(rand2 * 99) + 1;

                const music = musicRecommendations[selectedFortune.mood];
                currentFoodIndex = 0;
                const foodList = foodRecommendations[selectedFortune.mood];
                const food = foodList[0];

                document.getElementById('zodiac-icon').textContent = zodiac.icon;
                const displayName = nameInput ? `${nameInput}ë‹˜` : "ë‹¹ì‹ ";
                document.getElementById('user-greeting').textContent = `${displayName}ì˜ ë³„ìë¦¬`;
                document.getElementById('zodiac-name').textContent = zodiac.name;

                document.getElementById('score-love').innerHTML = generateStars(loveScore);
                document.getElementById('score-money').innerHTML = generateStars(moneyScore);
                document.getElementById('score-health').innerHTML = generateStars(healthScore);

                document.getElementById('fortune-text').textContent = selectedFortune.text;
                document.getElementById('lucky-color').textContent = `í–‰ìš´ìƒ‰: ${luckyColor}`;
                document.getElementById('lucky-number').textContent = `í–‰ìš´ìˆ˜: ${luckyNumber}`;
                
                updateFoodDisplay(food);

                document.getElementById('music-title').textContent = music.title;
                document.getElementById('music-desc').textContent = music.desc;
                document.getElementById('youtube-link').href = music.url;

                document.getElementById('input-section').classList.add('hidden');
                document.getElementById('result-section').classList.remove('hidden');
                document.getElementById('result-section').scrollIntoView({ behavior: 'smooth' });

                btnText.classList.remove('hidden');
                btnIcon.classList.remove('hidden');
                btnLoader.classList.add('hidden');
                lucide.createIcons();

            }, 1000); 
        }

        function updateFoodDisplay(food) {
            document.getElementById('food-name').textContent = food.name;
            document.getElementById('food-desc').textContent = food.desc;
            const mapBaseUrl = "https://map.naver.com/p/search/";
            document.getElementById('food-map-link').href = mapBaseUrl + encodeURIComponent(food.searchQuery);
        }

        function rerollFood() {
            if (!currentMood) return;
            const foodList = foodRecommendations[currentMood];
            currentFoodIndex = (currentFoodIndex + 1) % foodList.length;
            const nextFood = foodList[currentFoodIndex];
            
            const foodNameEl = document.getElementById('food-name');
            foodNameEl.style.opacity = '0';
            setTimeout(() => {
                updateFoodDisplay(nextFood);
                foodNameEl.style.opacity = '1';
            }, 200);
        }

        function copyResult() {
            const name = document.getElementById('username').value || "ë‚˜";
            const zodiac = document.getElementById('zodiac-name').textContent;
            const fortune = document.getElementById('fortune-text').textContent;
            const food = document.getElementById('food-name').textContent;
            
            const textToCopy = `[ğŸ”®ì˜¤ëŠ˜ì˜ ìš´ì„¸ & ìµì‚° ë§›ì§‘]\n\nğŸ‘¤ ${name}ì˜ ${zodiac} ìš´ì„¸\nâœ¨ "${fortune}"\n\nğŸ½ ì¶”ì²œ ë©”ë‰´: ${food}\n\nì˜¤ëŠ˜ë„ í–‰ìš´ ê°€ë“í•œ í•˜ë£¨ ë˜ì„¸ìš”!`;

            const textArea = document.getElementById('hidden-copy-area');
            textArea.value = textToCopy;
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                const btn = document.getElementById('copy-btn');
                const originalContent = btn.innerHTML;
                
                if (successful) {
                    btn.innerHTML = `<i data-lucide="check" class="w-4 h-4"></i><span>ë³µì‚¬ ì™„ë£Œ!</span>`;
                    btn.classList.add('bg-green-600', 'border-green-500');
                    setTimeout(() => {
                        btn.innerHTML = originalContent;
                        btn.classList.remove('bg-green-600', 'border-green-500');
                        lucide.createIcons();
                    }, 2000);
                } else {
                    alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (err) {
                console.error('Copy failed', err);
                alert('ë³µì‚¬ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }
        }

        function resetApp() {
            document.getElementById('input-section').classList.remove('hidden');
            document.getElementById('result-section').classList.add('hidden');
            if (!document.getElementById('remember-me').checked) {
                document.getElementById('birthdate').value = '';
                document.getElementById('username').value = '';
            }
        }
    </script>
</body>
</html>
